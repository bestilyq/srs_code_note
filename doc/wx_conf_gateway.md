<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=gb2312">
<meta name=Generator content="Microsoft Word 15 (filtered)">
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Helvetica;
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:宋体;
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:等线;
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:"等线 Light";
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:"\@等线";
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:"\@等线 Light";
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:"\@宋体";
	panose-1:2 1 6 0 3 1 1 1 1 1;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:等线;}
h1
	{mso-style-link:"标题 1 字符";
	margin-top:17.0pt;
	margin-right:0cm;
	margin-bottom:16.5pt;
	margin-left:0cm;
	text-align:justify;
	text-justify:inter-ideograph;
	line-height:240%;
	page-break-after:avoid;
	font-size:22.0pt;
	font-family:等线;
	font-weight:bold;}
h2
	{mso-style-link:"标题 2 字符";
	margin-top:13.0pt;
	margin-right:0cm;
	margin-bottom:13.0pt;
	margin-left:0cm;
	text-align:justify;
	text-justify:inter-ideograph;
	line-height:173%;
	page-break-after:avoid;
	font-size:16.0pt;
	font-family:"等线 Light";
	font-weight:bold;}
h3
	{mso-style-link:"标题 3 字符";
	margin-top:13.0pt;
	margin-right:0cm;
	margin-bottom:13.0pt;
	margin-left:0cm;
	text-align:justify;
	text-justify:inter-ideograph;
	line-height:173%;
	page-break-after:avoid;
	font-size:16.0pt;
	font-family:等线;
	font-weight:bold;}
h4
	{mso-style-link:"标题 4 字符";
	margin-top:14.0pt;
	margin-right:0cm;
	margin-bottom:14.5pt;
	margin-left:0cm;
	text-align:justify;
	text-justify:inter-ideograph;
	line-height:156%;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"等线 Light";
	font-weight:bold;}
p.MsoToc1, li.MsoToc1, div.MsoToc1
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:等线;}
p.MsoToc2, li.MsoToc2, div.MsoToc2
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:21.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:等线;}
p.MsoToc3, li.MsoToc3, div.MsoToc3
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:42.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:等线;}
p.MsoHeader, li.MsoHeader, div.MsoHeader
	{mso-style-link:"页眉 字符";
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:center;
	layout-grid-mode:char;
	border:none;
	padding:0cm;
	font-size:9.0pt;
	font-family:等线;}
p.MsoFooter, li.MsoFooter, div.MsoFooter
	{mso-style-link:"页脚 字符";
	margin:0cm;
	margin-bottom:.0001pt;
	layout-grid-mode:char;
	font-size:9.0pt;
	font-family:等线;}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:#954F72;
	text-decoration:underline;}
p
	{margin-right:0cm;
	margin-left:0cm;
	font-size:12.0pt;
	font-family:宋体;}
p.MsoNoSpacing, li.MsoNoSpacing, div.MsoNoSpacing
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:等线;}
p.MsoListParagraph, li.MsoListParagraph, div.MsoListParagraph
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:21.0pt;
	font-size:10.5pt;
	font-family:等线;}
p.MsoTocHeading, li.MsoTocHeading, div.MsoTocHeading
	{margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	line-height:107%;
	page-break-after:avoid;
	font-size:16.0pt;
	font-family:"等线 Light";
	color:#2F5496;}
span.1
	{mso-style-name:"标题 1 字符";
	mso-style-link:"标题 1";
	font-weight:bold;}
span.2
	{mso-style-name:"标题 2 字符";
	mso-style-link:"标题 2";
	font-family:"等线 Light";
	font-weight:bold;}
span.3
	{mso-style-name:"标题 3 字符";
	mso-style-link:"标题 3";
	font-weight:bold;}
span.4
	{mso-style-name:"标题 4 字符";
	mso-style-link:"标题 4";
	font-family:"等线 Light";
	font-weight:bold;}
span.a
	{mso-style-name:"页眉 字符";
	mso-style-link:页眉;}
span.a0
	{mso-style-name:"页脚 字符";
	mso-style-link:页脚;}
.MsoChpDefault
	{font-family:等线;}
 /* Page Definitions */
 @page WordSection1
	{size:595.3pt 841.9pt;
	margin:72.0pt 90.0pt 72.0pt 90.0pt;
	layout-grid:15.6pt;}
div.WordSection1
	{page:WordSection1;}
 /* List Definitions */
 ol
	{margin-bottom:0cm;}
ul
	{margin-bottom:0cm;}
-->
</style>

</head>

<body lang=ZH-CN link=blue vlink="#954F72" style='text-justify-trim:punctuation'>

<div class=WordSection1 style='layout-grid:15.6pt'>

<h1><a name="_Toc26098376">微信小程序网关</a>设计方案</h1>

<p class=MsoTocHeading>目录</p>

<p class=MsoToc1><span lang=EN-US><a href="#_Toc26098376"><span lang=EN-US><span
lang=EN-US>微信小程序网关设计与实现</span></span><span style='color:windowtext;display:
none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>1</span></a></span></p>

<p class=MsoToc1><span lang=EN-US><a href="#_Toc26098377"><span lang=EN-US><span
lang=EN-US>需求</span></span><span style='color:windowtext;display:none;
text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>1</span></a></span></p>

<p class=MsoToc1><span lang=EN-US><a href="#_Toc26098378"><span lang=EN-US><span
lang=EN-US>应用场景</span></span><span style='color:windowtext;display:none;
text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>1</span></a></span></p>

<p class=MsoToc2><span lang=EN-US><a href="#_Toc26098379"><span lang=EN-US><span
lang=EN-US>小程序仅加入会议</span></span><span style='color:windowtext;display:none;
text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>1</span></a></span></p>

<p class=MsoToc2><span lang=EN-US><a href="#_Toc26098380"><span lang=EN-US><span
lang=EN-US>小程序与一个APP</span></span><span style='color:windowtext;display:none;
text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>1</span></a></span></p>

<p class=MsoToc2><span lang=EN-US><a href="#_Toc26098381"><span lang=EN-US><span
lang=EN-US>小程序与多个APP</span></span><span style='color:windowtext;display:none;
text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>1</span></a></span></p>

<p class=MsoToc2><span lang=EN-US><a href="#_Toc26098382"><span lang=EN-US><span
lang=EN-US>两个小程序</span></span><span style='color:windowtext;display:none;
text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>1</span></a></span></p>

<p class=MsoToc2><span lang=EN-US><a href="#_Toc26098383"><span lang=EN-US><span
lang=EN-US>多个app</span></span><span lang=EN-US><span lang=EN-US>与多个小程序</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>1</span></a></span></p>

<p class=MsoToc1><span lang=EN-US><a href="#_Toc26098384"><span lang=EN-US><span
lang=EN-US>模块</span></span><span style='color:windowtext;display:none;
text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>1</span></a></span></p>

<p class=MsoToc2><span lang=EN-US><a href="#_Toc26098385"><span lang=EN-US><span
lang=EN-US>微信网关结构图</span></span><span style='color:windowtext;display:none;
text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>1</span></a></span></p>

<p class=MsoToc2><span lang=EN-US><a href="#_Toc26098386"><span lang=EN-US><span
lang=EN-US>交互流程</span></span><span style='color:windowtext;display:none;
text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>1</span></a></span></p>

<p class=MsoToc3><span lang=EN-US><a href="#_Toc26098387"><span lang=EN-US><span
lang=EN-US>小程序加入会议流程</span></span><span style='color:windowtext;display:none;
text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>1</span></a></span></p>

<p class=MsoToc3><span lang=EN-US><a href="#_Toc26098388"><span lang=EN-US><span
lang=EN-US>多个小程序请求同一app</span></span><span lang=EN-US><span lang=EN-US>视频不包括声音流程</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>1</span></a></span></p>

<p class=MsoToc3><span lang=EN-US><a href="#_Toc26098389"><span lang=EN-US><span
lang=EN-US>小程序请求视频流程</span></span><span style='color:windowtext;display:none;
text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>1</span></a></span></p>

<p class=MsoToc1><span lang=EN-US><a href="#_Toc26098390"><span lang=EN-US><span
lang=EN-US>接口</span></span><span style='color:windowtext;display:none;
text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>1</span></a></span></p>

<p class=MsoToc2><span lang=EN-US><a href="#_Toc26098391"><span
style='font-family:"Helvetica",sans-serif'>MCS </span><span lang=EN-US><span
lang=EN-US>与</span></span><span style='font-family:"Helvetica",sans-serif'>callroutegw</span><span
lang=EN-US><span lang=EN-US>相关接口</span></span><span style='color:windowtext;
display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>1</span></a></span></p>

<p class=MsoToc3><span lang=EN-US><a href="#_Toc26098392"><span lang=EN-US><span
lang=EN-US>加入会议 wxjoinconf</span></span><span style='color:windowtext;
display:none;text-decoration:none'> </span><span
style='color:windowtext;display:none;text-decoration:none'>1</span></a></span></p>

<p class=MsoToc3><span lang=EN-US><a href="#_Toc26098393"><span lang=EN-US><span
lang=EN-US>退出会议 &nbsp;wxquitconf</span></span><span style='color:windowtext;
display:none;text-decoration:none'> </span><span
style='color:windowtext;display:none;text-decoration:none'>1</span></a></span></p>

<p class=MsoToc3><span lang=EN-US><a href="#_Toc26098394"><span lang=EN-US><span
lang=EN-US>请求视频 wxreqvideo</span></span><span style='color:windowtext;
display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>1</span></a></span></p>

<p class=MsoToc3><span lang=EN-US><a href="#_Toc26098395"><span lang=EN-US><span
lang=EN-US>取消视频 wxcancelvideo</span></span><span style='color:windowtext;
display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>1</span></a></span></p>

<p class=MsoToc3><span lang=EN-US><a href="#_Toc26098396"><span lang=EN-US><span
lang=EN-US>请求视频 wxreqavsync</span></span><span style='color:windowtext;
display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>1</span></a></span></p>

<p class=MsoToc2><span lang=EN-US><a href="#_Toc26098397">mcs <span lang=EN-US><span
lang=EN-US>和wxmgw</span></span><span lang=EN-US><span lang=EN-US>交互</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>1</span></a></span></p>

<p class=MsoToc1><span lang=EN-US><a href="#_Toc26098398"><span lang=EN-US><span
lang=EN-US>数据</span></span><span style='color:windowtext;display:none;
text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>1</span></a></span></p>

<p class=MsoToc1><span lang=EN-US><a href="#_Toc26098399"><span lang=EN-US><span
lang=EN-US>测试</span></span><span style='color:windowtext;display:none;
text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>1</span></a></span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h1><a name="_Toc26098377">需求</a></h1>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:0cm'><span
lang=EN-US>1.</span>小程序加入会议，其他客户端能看到小程序会议的视频与声音</p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:0cm'><span
lang=EN-US>2.</span>小程序需要其他客户端视频与声音</p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:0cm'><span
lang=EN-US>3.</span>其他客户端能看到小程序会议音视频</p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:0cm'><span
lang=EN-US>4.</span>可以多个小程序加入会议</p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:0cm'><span
lang=EN-US>5.</span>小程序可以获取其他小程序的会议音视频</p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:0cm'><span
lang=EN-US>&nbsp;</span></p>

<h1><a name="_Toc26098378">应用场景</a></h1>

<p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp; </span>小程序加入会议有多种场景</p>

<h2><a name="_Toc26098379">小程序仅加入会议</a></h2>

<p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp; <img width=827 height=185
src="wx_conf_gateway.files/image001.png"></span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp;&nbsp; </span>这种场景应用是小程序加入会议后，只需要会议声音，不需要看其他的视频</p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:0cm'><span
lang=EN-US>&nbsp;</span></p>

<h2><a name="_Toc26098380">小程序与一个<span lang=EN-US>APP</span></a></h2>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:0cm'><span
lang=EN-US><img width=818 height=386 src="wx_conf_gateway.files/image002.png"></span></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:0cm'>小程序与<span
lang=EN-US>app</span>加入会议后，小程序需要看到<span lang=EN-US>app</span>的视频，同时与需要会议的声音， <span
lang=EN-US>app</span>也需要看到小程序的视频，同时听到会议的声音</p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:0cm'><span
lang=EN-US>&nbsp;</span></p>

<h2><a name="_Toc26098381">小程序与多个<span lang=EN-US>APP</span></a></h2>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US><img width=848 height=435
src="wx_conf_gateway.files/image003.png"></span></p>

<p class=MsoNormal>小程序与多个<span lang=EN-US>app</span>加入会议， 每个<span lang=EN-US>app</span>需要会议声音与其他<span
lang=EN-US>app</span>与小程序的视频，小程序需要会议声音与所有<span lang=EN-US>app</span>的视频<span
lang=EN-US><br>
<br>
</span></p>

<h2><a name="_Toc26098382">两个小程序</a></h2>

<p class=MsoNormal><span lang=EN-US><img width=854 height=431
src="wx_conf_gateway.files/image004.png"></span></p>

<p class=MsoNormal>两个小程序加入会议后，小程序<span lang=EN-US>1</span>需要会议声音与小程序<span
lang=EN-US>2</span>的视频， 小程序<span lang=EN-US>2</span>需要会议声音与小程序<span lang=EN-US>1</span>的视频</p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h2><a name="_Toc26098383">多个<span lang=EN-US>app</span>与多个小程序</a></h2>

<p class=MsoNormal><span lang=EN-US><img width=862 height=427
src="wx_conf_gateway.files/image005.png"></span></p>

<p class=MsoNormal>多个小程序与多个<span lang=EN-US>app</span>加入会议后， 每个<span
lang=EN-US>app</span>或小程序需要看到其他所视频以及会议的声音</p>

<h1><a name="_Toc26098384">模块</a></h1>

<h2><a name="_Toc26098385">微信网关结构图</a></h2>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:0cm'><span
lang=EN-US><img width=806 height=583 src="wx_conf_gateway.files/image006.png"></span></p>

<p class=MsoListParagraph style='margin-left:18.0pt'><b>微信网关程序</b>主要功能将小程序推到直播服务器的音视频流，拉过来之后，将音视频解复用，再将音频与视频分别推送给会议系统的<span
lang=EN-US>mas, </span>这样小程序就加入会议开会。同时微信网关与会将会议中其他<span lang=EN-US>app</span>的音视频拉过来之后，再将复合成<span
lang=EN-US>rtmp</span>流推到直播服务器，然后小程序将可以拉到其他<span lang=EN-US>app</span>的音视频</p>

<p class=MsoListParagraph style='margin-left:18.0pt'>每个小程序加入同一会议后，将这个会议的声音返回给小程序，这路声音是从会议<span
lang=EN-US>mas</span>中传送过来，<span lang=EN-US>rtpRecver</span>收到之后将放入该小程序的<span
lang=EN-US>audio Pub</span>与<span lang=EN-US>video pub</span>中，如果小程序只需要声音，<span
lang=EN-US>flv muxer</span>订阅该通道的<span lang=EN-US>audio, </span>转发到直播服务器，小程序再从直播服务器拉流。如果同时小程序需要其他<span
lang=EN-US>app</span>视频，需要通过<span lang=EN-US>mas</span>将<span lang=EN-US>app</span>视频传送过来，<span
lang=EN-US>flv muxer</span>将音频与视频复后成一路<span lang=EN-US>rtmp</span>推送到直播服务器。</p>

<p class=MsoListParagraph style='margin-left:18.0pt'>小程序请求视频有两种情况，一种时请求<span
lang=EN-US>app</span>的视频需要通过<span lang=EN-US>mas</span>传送过来，另外一种时同会议中其他小程序的视频，因为其他小程序视频是通过微信网关拉过来，再转发到<span
lang=EN-US>mas, </span>所以其他小程序的视频，在转发<span lang=EN-US>mas </span>需要放到<span
lang=EN-US>video pub, </span>如果有其他小程序需要该视频，直接订阅之后，再通过<span lang=EN-US>flv muxer</span>复后之后发送到直播服务器</p>

<p class=MsoListParagraph style='margin-left:18.0pt'><span style='color:red'>同一会议的所有小程序音视频处理，需要确保在同一个微信网关程序处理，集群环境也需要这样</span></p>

<h2><a name="_Toc26098386">交互流程</a></h2>

<h3><a name="_Toc26098387">小程序加入会议流程</a></h3>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:0cm'><span
lang=EN-US><img width=824 height=739 src="wx_conf_gateway.files/image007.png"></span></p>

<h3><a name="_Toc26098388">多个小程序请求同一<span lang=EN-US>app</span>视频不包括声音流程</a></h3>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:0cm'><span
lang=EN-US><img width=796 height=750 src="wx_conf_gateway.files/image008.png"></span></p>

<h3><a name="_Toc26098389">小程序请求视频流程</a></h3>

<p class=MsoNormal><span lang=EN-US><img width=830 height=746
src="wx_conf_gateway.files/image009.png"></span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h4>请求普通成员视频<span lang=EN-US>: </span></h4>

<p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1</span>只需要视频：<span
lang=EN-US>&nbsp; </span>如果成员已经在<span lang=EN-US>wxgw, </span>直接到直播服务器拉流，否则将该成员的会议视频从<span
lang=EN-US>mas</span>推流到<span lang=EN-US>wxgw. </span>同时推流到直播服务器，再从直播服务拉流</p>

<p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2.</span>需要视频同时需要混音<span
lang=EN-US>, </span>首先走只需要视频流程，同时将该成员视频与小程序成员的混音合同一路直播流，推流直播服务器，再拉流</p>

<h4>请求小程序成员视频<span lang=EN-US>:&nbsp; </span></h4>

<p class=MsoListParagraph style='margin-left:49.5pt;text-indent:-18.0pt'><span
lang=EN-US>1．<span style='font:7.0pt "Times New Roman"'> </span></span>只要视频，</p>

<p class=MsoNormal style='margin-left:31.5pt;text-indent:21.0pt'>方案<span
lang=EN-US>1:</span>在<span lang=EN-US>wxgw</span>检查有没有该小程序<span lang=EN-US>rtmp2rtp,
</span>如果没有创建一个，然后解复合<span lang=EN-US>video, audio, </span>然后将<span lang=EN-US>video</span>到推直播服务器，
</p>

<p class=MsoNormal style='margin-left:31.5pt;text-indent:21.0pt'>方案<span
lang=EN-US>2:</span>直在从直播服务器拉小程序参与的<span lang=EN-US>rtmp</span>流，包括有<span
lang=EN-US>AV, </span>小程序播放时，把<span lang=EN-US>A</span>禁用</p>

<p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2.</span>需要混音</p>

<p class=MsoNormal style='text-indent:42.0pt'><span lang=EN-US>wxgw</span>拉流后解复合<span
lang=EN-US>video, audio, </span>再将<span lang=EN-US>video</span>与小程序混音复合成<span
lang=EN-US>rtmp</span>流</p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h1><a name="_Toc26098390">接口</a></h1>

<h2><a name="_Toc26098391"><span lang=EN-US style='font-size:26.5pt;line-height:
173%;font-family:"Helvetica",sans-serif;font-weight:normal'>MCS </span></a><span
style='font-size:26.5pt;line-height:173%;font-weight:normal'>与</span><span
lang=EN-US style='font-size:26.5pt;line-height:173%;font-family:"Helvetica",sans-serif;
font-weight:normal'>callroutegw</span><span style='font-size:26.5pt;line-height:
173%;font-weight:normal'>相关接口</span></h2>

<h3><a name="_Toc26098392">加入会议 <span lang=EN-US>wxjoinconf</span></a><span
lang=EN-US> </span></h3>

<p class=MsoNoSpacing><span lang=EN-US>eg:<br>
{<br>
&nbsp; &nbsp; &quot;id&quot;: &quot;3&quot;,</span></p>

<p class=MsoNoSpacing><span lang=EN-US>&nbsp;&nbsp;&nbsp; &nbsp;&quot;uuid&quot;:
&quot;14f5ac8e-5496-11e7-a38b-d93e113210c6&quot;,</span></p>

<p class=MsoNoSpacing><span lang=EN-US>&nbsp;&nbsp; &nbsp;&quot;method&quot;:
&quot;wxjoinconf&quot;,<br>
&nbsp; &nbsp; &quot;params&quot;: {</span></p>

<p class=MsoNoSpacing><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;confId&quot;:
&quot;123&quot; ,</span></p>

<p class=MsoNoSpacing><span lang=EN-US>&nbsp; &nbsp; &nbsp; &nbsp;
&nbsp;&nbsp;&quot;crgwid&quot;:&quot;53001&quot;,&nbsp; &nbsp; &nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //</span>对应<span
lang=EN-US>callroute</span>的编号<span lang=EN-US>&nbsp;</span></p>

<p class=MsoNoSpacing><span lang=EN-US>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span></p>

<p class=MsoNoSpacing><span lang=EN-US>&nbsp; &nbsp; }<br>
}</span></p>

<p class=MsoNoSpacing><span lang=EN-US>response<br>
{<br>
&nbsp; &nbsp; &nbsp;&quot;id&quot;: &quot;3&quot;,</span></p>

<p class=MsoNoSpacing><span lang=EN-US>&nbsp; &nbsp; &nbsp;&quot;uuid&quot;:
&quot;14f5ac8e-5496-11e7-a38b-d93e113210c6&quot;,&nbsp;&nbsp;//</span>用户<span
lang=EN-US>ID</span></p>

<p class=MsoNoSpacing><span lang=EN-US>&nbsp; &nbsp;
&quot;method&quot;:&quot;wxjoinconf&quot;,<br>
&nbsp; &nbsp; &nbsp;&quot;result&quot;: {<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;audiossrc&quot;: &quot;503677616&quot;,</span></p>

<p class=MsoNoSpacing><span lang=EN-US>&nbsp; &nbsp; &nbsp; &nbsp;
&nbsp;&nbsp;&quot;videossrc&quot;: &quot;503677616&quot;,</span></p>

<p class=MsoNoSpacing><span lang=EN-US>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&quot;pushurl&quot;:&quot;&quot;,&nbsp;
&nbsp; &nbsp; &nbsp;<span style='color:black'>//</span></span><span
style='color:black'>小程序推音视频流的<span lang=EN-US>rtmp url</span></span></p>

<p class=MsoNoSpacing><span lang=EN-US>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&quot;pullurl&quot;:&quot;&quot;,
<span style='color:black'>//</span></span><span style='color:black'>小程序推音视频流所对应的拉流地址，</span></p>

<p class=MsoNoSpacing style='text-indent:94.5pt'><span lang=EN-US
style='color:black'>//</span><span style='color:black'>小程序本身不使用，<span
lang=EN-US>debug</span>时用到</span></p>

<p class=MsoNoSpacing><span lang=EN-US>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;pullaudiourl&quot;:&quot;&quot;,&nbsp;
&nbsp; <span style='color:black'>//</span></span><span style='color:black'>小程序拉会议音频的<span
lang=EN-US>rtmp url</span></span></p>

<p class=MsoNoSpacing><span lang=EN-US style='color:black'>&nbsp; &nbsp; &nbsp;
&nbsp;&nbsp;&nbsp; &quot;audioip&quot;: &quot;192.168.1.123&quot;,&nbsp; &nbsp;
&nbsp; &nbsp;//</span><span style='color:black'>音频<span lang=EN-US>mas</span>地址<span
lang=EN-US><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;audiortpport&quot;:
&quot;12345&quot;,&nbsp; &nbsp; &nbsp; &nbsp; //</span>音频<span lang=EN-US>mas
rtp</span>媒体端口</span></p>

<p class=MsoNoSpacing><span lang=EN-US style='color:black'>&nbsp; &nbsp; &nbsp;
&nbsp;&nbsp;&nbsp; &quot;videoip&quot;: &quot;192.168.1.123&quot;,&nbsp; &nbsp;
&nbsp; &nbsp;//</span><span style='color:black'>视频<span lang=EN-US>mas</span>地址<span
lang=EN-US><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;videortpport&quot;:
&quot;12345&quot;,&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;//</span>视频<span
lang=EN-US>mas rtp</span>媒体端口</span></p>

<p class=MsoNoSpacing><span lang=EN-US>&nbsp; &nbsp; &nbsp;}<br>
}</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h3><a name="_Toc26098393">退出会议 <span lang=EN-US>&nbsp;wxquitconf</span></a></h3>

<p class=MsoNoSpacing><span lang=EN-US>eg:<br>
{<br>
&nbsp; &nbsp; &quot;id&quot;: &quot;3&quot;,</span></p>

<p class=MsoNoSpacing><span lang=EN-US>&nbsp;&nbsp;&nbsp; &nbsp;&quot;uuid&quot;:
&quot;14f5ac8e-5496-11e7-a38b-d93e113210c6&quot;,<br>
&nbsp; &nbsp; &quot;method&quot;: &quot;wxquitconf&quot;,<br>
&nbsp; &nbsp; &quot;params&quot;: {</span></p>

<p class=MsoNoSpacing><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;confId&quot;:
&quot;123&quot;,</span></p>

<p class=MsoNoSpacing><span lang=EN-US>&nbsp; &nbsp; &nbsp; &nbsp;
&nbsp;&quot;crgwid&quot;:&quot;53001&quot;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
&nbsp;//callroutegw</span>编号如<span lang=EN-US>53001&nbsp;</span></p>

<p class=MsoNoSpacing><span lang=EN-US>&nbsp; &nbsp; }<br>
}</span></p>

<p class=MsoNoSpacing><span lang=EN-US>response<br>
{<br>
&nbsp; &nbsp; &nbsp;&quot;id&quot;: &quot;3&quot;,</span></p>

<p class=MsoNoSpacing><span lang=EN-US>&nbsp; &nbsp;&nbsp; &quot;uuid&quot;:
&quot;14f5ac8e-5496-11e7-a38b-d93e113210c6&quot;,&nbsp;&nbsp;//</span>用户<span
lang=EN-US>ID</span></p>

<p class=MsoNoSpacing><span lang=EN-US>&nbsp; &nbsp;
&quot;method&quot;:&quot;wxquitconf&quot;,<br>
&nbsp; &nbsp; &nbsp;&quot;result&quot;: {</span></p>

<p class=MsoNoSpacing><span lang=EN-US>&nbsp; &nbsp; &nbsp;}<br>
}</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h3><a name="_Toc26098394">请求视频 <span lang=EN-US>wxreqvideo</span></a></h3>

<p class=MsoNoSpacing><span lang=EN-US>eg:<br>
{<br>
&nbsp; &nbsp; &quot;id&quot;: &quot;3&quot;,</span></p>

<p class=MsoNoSpacing><span lang=EN-US>&nbsp;&nbsp;&nbsp; &quot;uuid&quot;:
&quot;14f5ac8e-5496-11e7-a38b-d93e113210c6&quot;,<br>
&nbsp; &nbsp; &quot;method&quot;: &quot;wxreqvideo&quot;,<br>
&nbsp; &nbsp; &quot;params&quot;: {</span></p>

<p class=MsoNoSpacing><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;confId&quot;:
&quot;123&quot; ,</span></p>

<p class=MsoNoSpacing><span lang=EN-US>&nbsp; &nbsp; &nbsp; &nbsp;
&nbsp;&quot;antissrc&quot;:&quot;503677616&quot;,&nbsp; &nbsp; &nbsp; <span
style='color:black'>//</span></span><span style='color:black'>被请求视频的会议成员的<span
lang=EN-US>ssrc</span></span></p>

<p class=MsoNoSpacing><span lang=EN-US>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;seq&quot;:&quot;231ABfu13ad21&quot;,&nbsp;
&nbsp; &nbsp;//</span>微信小程序携带的消息序列号<span lang=EN-US>,</span>唯一标识一次请求</p>

<p class=MsoNoSpacing><span lang=EN-US>&nbsp; &nbsp; &nbsp; &nbsp;
&nbsp;&quot;type&quot;:&quot;1&quot;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;//</span>请求的类型，<span lang=EN-US>1</span>：视频<span
lang=EN-US>&nbsp; 2</span>：屏幕共享</p>

<p class=MsoNoSpacing><span lang=EN-US>&nbsp;&nbsp; }<br>
}</span></p>

<p class=MsoNoSpacing><span lang=EN-US>response<br>
{<br>
&nbsp; &nbsp; &nbsp;&quot;id&quot;: &quot;3&quot;,</span></p>

<p class=MsoNoSpacing><span lang=EN-US>&nbsp; &nbsp; &nbsp;&quot;uuid&quot;:
&quot;14f5ac8e-5496-11e7-a38b-d93e113210c6&quot;,&nbsp;&nbsp;//</span>用户<span
lang=EN-US>ID</span></p>

<p class=MsoNoSpacing><span lang=EN-US>&nbsp; &nbsp;
&quot;method&quot;:&quot;wxreqvideo&quot;,<br>
&nbsp; &nbsp; &nbsp;&quot;result&quot;: {</span></p>

<p class=MsoNoSpacing><span lang=EN-US>&nbsp; &nbsp; &nbsp; &nbsp;
&nbsp;&quot;pullurl&quot;:&quot;&quot;,</span></p>

<p class=MsoNoSpacing><span lang=EN-US>&nbsp; &nbsp; &nbsp; &nbsp;
&nbsp;&quot;seq&quot;:&quot;231ABfu13ad21&quot;,&nbsp; &nbsp;//</span>微信小程序携带的消息序列号<span
lang=EN-US>,</span>唯一标识一次请求</p>

<p class=MsoNoSpacing><span lang=EN-US>&nbsp; &nbsp; &nbsp; &nbsp;
&nbsp;&quot;type&quot;:&quot;1&quot;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; //</span>请求的类型，<span lang=EN-US>1</span>：视频<span
lang=EN-US>&nbsp; 2</span>：屏幕共享</p>

<p class=MsoNoSpacing><span lang=EN-US>&nbsp; &nbsp; &nbsp;}<br>
}</span></p>

<h3><a name="_Toc26098395">取消视频<span lang=EN-US> wxcancelvideo</span></a></h3>

<p class=MsoNoSpacing><span lang=EN-US>eg:<br>
{<br>
&nbsp; &nbsp; &quot;id&quot;: &quot;3&quot;,</span></p>

<p class=MsoNoSpacing><span lang=EN-US>&nbsp;&nbsp;&nbsp; &quot;uuid&quot;: &quot;14f5ac8e-5496-11e7-a38b-d93e113210c6&quot;,<br>
&nbsp; &nbsp; &quot;method&quot;: &quot;wxcancelvideo&quot;,<br>
&nbsp; &nbsp; &quot;params&quot;: {</span></p>

<p class=MsoNoSpacing><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;confId&quot;:
&quot;123&quot; ,</span></p>

<p class=MsoNoSpacing><span lang=EN-US>&nbsp; &nbsp; &nbsp; &nbsp;
&nbsp;&quot;antissrc&quot;:&quot;503677616&quot;,&nbsp; &nbsp; &nbsp; &nbsp; <span
style='color:black'>//</span></span><span style='color:black'>被请求视频的会议成员的<span
lang=EN-US>ssrc</span></span></p>

<p class=MsoNoSpacing><span lang=EN-US>&nbsp; &nbsp; &nbsp; &nbsp;
&nbsp;&quot;seq&quot;:&quot;231ABfu13ad21&quot;,&nbsp; &nbsp; &nbsp; &nbsp;//</span>微信小程序携带的消息序列号<span
lang=EN-US>,</span>唯一标识一次请求</p>

<p class=MsoNoSpacing><span lang=EN-US>&nbsp; &nbsp; &nbsp; &nbsp;
&nbsp;&quot;type&quot;:&quot;1&quot;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;//</span>请求的类型，<span lang=EN-US>1</span>：视频<span
lang=EN-US>&nbsp; 2</span>：屏幕共享</p>

<p class=MsoNoSpacing><span lang=EN-US>&nbsp; &nbsp; }<br>
}</span></p>

<p class=MsoNoSpacing><span lang=EN-US>response<br>
{<br>
&nbsp; &nbsp; &nbsp;&quot;id&quot;: &quot;3&quot;,</span></p>

<p class=MsoNoSpacing><span lang=EN-US>&nbsp; &nbsp; &nbsp;&quot;uuid&quot;:
&quot;14f5ac8e-5496-11e7-a38b-d93e113210c6&quot;,&nbsp;&nbsp;//</span>用户<span
lang=EN-US>ID</span></p>

<p class=MsoNoSpacing><span lang=EN-US>&nbsp; &nbsp;
&quot;method&quot;:&quot;wxcancelvideo&quot;,<br>
&nbsp; &nbsp; &nbsp;&quot;result&quot;: {</span></p>

<p class=MsoNoSpacing><span lang=EN-US>&nbsp; &nbsp; &nbsp; &nbsp;
&nbsp;&nbsp;&quot;seq&quot;:&quot;231ABfu13ad21&quot;,&nbsp; &nbsp; &nbsp;
&nbsp; &nbsp;//</span>微信小程序携带的消息序列号<span lang=EN-US>,</span>唯一标识一次请求</p>

<p class=MsoNoSpacing><span lang=EN-US>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
&quot;type&quot;:&quot;1&quot;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
&nbsp; //</span>请求的类型，<span lang=EN-US>1</span>：视频<span lang=EN-US>&nbsp; 2</span>：屏幕共享</p>

<p class=MsoNoSpacing><span lang=EN-US>&nbsp; &nbsp; &nbsp;}<br>
}</span></p>

<p class=MsoNoSpacing><span lang=EN-US>&nbsp;</span></p>

<h3><a name="_Toc26098396">请求视频 <span lang=EN-US>wxreqavsync</span></a></h3>

<p class=MsoNoSpacing><span lang=EN-US>eg:<br>
{<br>
&nbsp; &nbsp; &quot;id&quot;: &quot;3&quot;,</span></p>

<p class=MsoNoSpacing><span lang=EN-US>&nbsp;&nbsp;&nbsp; &quot;uuid&quot;:
&quot;14f5ac8e-5496-11e7-a38b-d93e113210c6&quot;,<br>
&nbsp; &nbsp; &quot;method&quot;: &quot; wxreqavsync,<br>
&nbsp; &nbsp; &quot;params&quot;: {</span></p>

<p class=MsoNoSpacing><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;confId&quot;:
&quot;123&quot; ,</span></p>

<p class=MsoNoSpacing><span lang=EN-US>&nbsp; &nbsp; &nbsp; &nbsp;
&nbsp;&quot;antissrc&quot;:&quot;503677616&quot;,&nbsp; &nbsp; &nbsp; <span
style='color:black'>//</span></span><span style='color:black'>被请求视频的会议成员的<span
lang=EN-US>ssrc</span></span></p>

<p class=MsoNoSpacing><span lang=EN-US>&nbsp; &nbsp; &nbsp; &nbsp;
&nbsp;&quot;seq&quot;:&quot;231ABfu13ad21&quot;,&nbsp; &nbsp; &nbsp;//</span>微信小程序携带的消息序列号<span
lang=EN-US>,</span>唯一标识一次请求</p>

<p class=MsoNoSpacing style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US>&quot;type&quot;:&quot;1&quot;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; //</span>请求的类型，<span lang=EN-US>1</span>：视频<span
lang=EN-US>&nbsp; 2</span>：屏幕共享</p>

<p class=MsoNoSpacing><span lang=EN-US>&nbsp; &nbsp; &nbsp;}</span></p>

<p class=MsoNoSpacing><span lang=EN-US>}<br>
}</span></p>

<p class=MsoNoSpacing><span lang=EN-US>response<br>
{<br>
&nbsp; &nbsp; &nbsp;&quot;id&quot;: &quot;3&quot;,</span></p>

<p class=MsoNoSpacing><span lang=EN-US>&nbsp; &nbsp; &nbsp;&quot;uuid&quot;:
&quot;14f5ac8e-5496-11e7-a38b-d93e113210c6&quot;,&nbsp;&nbsp;//</span>用户<span
lang=EN-US>ID</span></p>

<p class=MsoNoSpacing><span lang=EN-US>&nbsp; &nbsp; &quot;method&quot;:&quot; wxreqavsync
&quot;,<br>
&nbsp; &nbsp; &nbsp;&quot;result&quot;: {</span></p>

<p class=MsoNoSpacing><span lang=EN-US>&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;
&nbsp;&quot;seq&quot;:&quot;231ABfu13ad21&quot;,&nbsp; &nbsp;//</span>微信小程序携带的消息序列号<span
lang=EN-US>,</span>唯一标识一次请求</p>

<p class=MsoNoSpacing><span lang=EN-US>&nbsp; &nbsp; &nbsp; &nbsp;
&nbsp;&quot;type&quot;:&quot;1&quot;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; //</span>请求的类型，<span lang=EN-US>1</span>：视频<span
lang=EN-US>&nbsp; 2</span>：屏幕共享</p>

<p class=MsoNoSpacing><span lang=EN-US>&nbsp; &nbsp; &nbsp;}<br>
}</span></p>

<p class=MsoNoSpacing><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNoSpacing><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNoSpacing><span lang=EN-US>//</span>所有请求如果失败，都使用下面的失败应答：</p>

<p class=MsoNoSpacing><span lang=EN-US>error message:<br>
{<br>
&nbsp; &nbsp; &quot;id&quot;: &quot;1&quot;,</span></p>

<p class=MsoNoSpacing><span lang=EN-US>&nbsp; &nbsp;&nbsp;&quot;uuid&quot;: &quot;14f5ac8e-5496-11e7-a38b-d93e113210c6&quot;,&nbsp;&nbsp;//</span>用户<span
lang=EN-US>ID</span></p>

<p class=MsoNoSpacing><span lang=EN-US>&nbsp; &nbsp;
&quot;method&quot;:&quot;&quot;,&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //</span>内容为请求的<span
lang=EN-US>method</span>值<span lang=EN-US><br>
&nbsp; &nbsp; &quot;result&quot;: {<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;code&quot;: &quot;111&quot;,<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;message&quot;: &quot;Invalid
format&quot;<br>
&nbsp; &nbsp; &nbsp; }<br>
}</span></p>

<h2><a name="_Toc26098397"><span lang=EN-US>mcs </span>和<span lang=EN-US>wxmgw</span>交互</a></h2>

<p class=MsoNormal><span lang=EN-US style='font-family:"Helvetica",sans-serif;
color:#333333;background:white'>struct Port {</span><span lang=EN-US
style='font-family:"Helvetica",sans-serif;color:#333333'><br>
<span style='background:white'>1:i32 audio,</span><br>
<span style='background:white'>2:i32 video,</span><br>
<span style='background:white'>}</span><br>
<span style='background:white'>struct StartPushReq {</span><br>
<span style='background:white'>1:string uuid,</span><br>
<span style='background:white'>2:string pushUrl,</span><br>
<span style='background:white'>3:i32 audioPayloadType,</span><br>
<span style='background:white'>4:string audioCodec,</span><br>
<span style='background:white'>5:i32 videoPayloadType,</span><br>
<span style='background:white'>6:string videoCodec</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"Helvetica",sans-serif;
color:red;background:white'>7:string confId,</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"Helvetica",sans-serif;
color:red;background:white'>8:string reqUuid,</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"Helvetica",sans-serif;
color:red;background:white'>9:string weixin,&nbsp;&nbsp; </span><span
style='color:red;background:white'>与成员是微信小程序成员</span><span lang=EN-US
style='font-family:"Helvetica",sans-serif;color:#333333'><br>
<span style='background:white'>}</span><br>
<span style='background:white'>struct StartPushResp {</span><br>
<span style='background:white'>1:Port port,</span><br>
<span style='background:white'>2:i32 code,</span><br>
<span style='background:white'>3:string message,</span><br>
<span style='background:white'>}</span><br>
<span style='background:white'>struct StopPushReq {</span><br>
<span style='background:white'>1:string uuid,</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"Helvetica",sans-serif;
color:red;background:white'>2:string confId</span><span lang=EN-US
style='font-family:"Helvetica",sans-serif;color:#333333'><br>
<span style='background:white'>}</span><br>
<span style='background:white'>struct StopPushResp {</span><br>
<span style='background:white'>1:i32 code,</span><br>
<span style='background:white'>2:string message,</span><br>
<span style='background:white'>}</span><br>
<span style='background:white'>struct StartPullReq{</span><br>
<span style='background:white'>1:string uuid,</span><br>
<span style='background:white'>2:string pullUrl,</span><br>
<span style='background:white'>3:i64 ssrc,</span><br>
<span style='background:white'>4:string masIp,</span><br>
<span style='background:white'>5:i32 audioPort,</span><br>
<span style='background:white'>6:i32 videoPort,</span><br>
<span style='background:white'>7:i32 audioPayloadType,</span><br>
<span style='background:white'>8:string audioCodec,</span><br>
<span style='background:white'>9:i32 videoPayloadType,</span><br>
<span style='background:white'>10:string VideoCodec,</span><br>
<span style='background:white'>11:string pushAudioUrl,</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"Helvetica",sans-serif;
color:red;background:white'>12:string confId</span><span lang=EN-US
style='font-family:"Helvetica",sans-serif;color:#333333'>,<br>
<span style='background:white'>}</span><br>
<span style='background:white'>struct StartPullResp {</span><br>
<span style='background:white'>1:i32 code,</span><br>
<span style='background:white'>2:string message,</span><br>
<span style='background:white'>}</span><br>
<span style='background:white'>struct StopPullReq {</span><br>
<span style='background:white'>1:string uuid,</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"Helvetica",sans-serif;
color:red;background:white'>2:string confId</span><span lang=EN-US
style='font-family:"Helvetica",sans-serif;color:#333333'>,<br>
<span style='background:white'>}</span><br>
<span style='background:white'>struct StopPullResp {</span><br>
<span style='background:white'>1:i32 code,</span><br>
<span style='background:white'>2:string message</span><br>
<span style='background:white'>}</span></span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"Helvetica",sans-serif;
color:red;background:white'>struct AvSyncReq {</span><span lang=EN-US
style='font-family:"Helvetica",sans-serif;color:red'><br>
<span style='background:white'>1:string uuid,</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"Helvetica",sans-serif;
color:red;background:white'>2:string confId</span><span lang=EN-US
style='font-family:"Helvetica",sans-serif;color:red'>,</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"Helvetica",sans-serif;
color:red'>3:string syncUuid<br>
<span style='background:white'>}</span><br>
<span style='background:white'>struct AvSyncResp {</span><br>
<span style='background:white'>1:i32 code,</span><br>
<span style='background:white'>2:string message</span><br>
<span style='background:white'>}</span></span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h1><a name="_Toc26098398">数据</a></h1>

<p class=MsoNormal><span lang=EN-US>Mcs</span>会议成员</p>

<p class=MsoListParagraph>普通成员<span lang=EN-US>: &nbsp;&nbsp;</span>小程序视频直播频道，推流与拉流地址</p>

<p class=MsoListParagraph>小程序成员<span lang=EN-US>: &nbsp;</span>混音直播频道，推流与拉流地址 </p>

<p class=MsoNormal><span lang=EN-US>Wxgw</span>重要数据</p>

<p class=MsoListParagraph><span lang=EN-US>&nbsp;</span></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:0cm'><span
lang=EN-US>Rtp2rtmpMap</span></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:0cm'><span
lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Key: uuid</span></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:0cm'><span
lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>视频<span
lang=EN-US>pubsub</span></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:0cm'><span
lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>音频<span
lang=EN-US>pubsub</span></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:0cm'><span
lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Flvmuxer&nbsp;
flv</span>复合器</p>

<p class=MsoListParagraph><span lang=EN-US>&nbsp;</span></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:0cm'><span
lang=EN-US>Rtmp2rtpMap</span></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:0cm'><span
lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Key: uuid </span>小程序<span
lang=EN-US>uuid</span></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:0cm'><span
lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Flvdemuxer:
flv</span>解复合器</p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:0cm'><span
lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>视频<span
lang=EN-US>pubsub</span></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:0cm'><span
lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>音频<span
lang=EN-US>pubsub</span></p>

<p class=MsoListParagraph><span lang=EN-US>&nbsp;</span></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:0cm'>小程序会议房间<span
lang=EN-US>:</span></p>

<p class=MsoNormal style='text-indent:52.5pt'>小程序参会者 <span lang=EN-US>rtmp2rtp</span></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:0cm'><span
lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;</span>小程序参会者<span lang=EN-US>
rtp2rtmp</span></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:0cm'><span
lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;</span>小程序请求者 <span lang=EN-US>rtp2rtmp</span></p>

<h1><a name="_Toc26098399">测试</a></h1>

</div>

</body>

</html>
